---
import { access } from 'fs'
import DefaultLayout from '../layouts/DefaultLayout.astro'
import { getAccessToken } from '../lib/services/spotify/auth/accessToken/getAccessToken'

async function getProfile() {}
---

<DefaultLayout title="Login">
  <section class="my-64">
    <div class="container">
      <button class="request-auth">
        <h2 class="mb-16 text-6xl">Login</h2>
      </button>
    </div>
  </section>
</DefaultLayout>

<script >
  const urlParams = new URLSearchParams(window.location.search)
  let code = urlParams.get('code')

  if (code) {
    
  }
  import { requestUserAuth } from '../lib/services/spotify/user/requestAuthorization'

  const buttons = document.querySelectorAll('button.request-auth')

  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      requestUserAuth()
    })
  })
</script>
